<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>äº‹å‰ç²¾ç®—ï½œè»Šä¸¡ç¢ºèª</title>

<style>
:root {
  --bg: #fdf5e6;        /* ë°ì€ ë² ì´ì§€ */
  --panel: #fffaf0;     /* ì¹´ë“œ ë°°ê²½ */
  --text: #444;         /* ì–´ë‘ìš´ í…ìŠ¤íŠ¸ */
  --line: #d8c49b;
  --accent: #d6b85a;    /* ê°•ì¡°ìƒ‰ */
  --hover: #f8efd0;
  --muted: #666;
}

*{box-sizing:border-box;}
html,body{height:100%;margin:0;padding:0;}
body{
  background:var(--bg);
  color:var(--text);
  font-family:'Noto Sans JP','Malgun Gothic',sans-serif;
  display:flex;flex-direction:column;
}

/* ìƒë‹¨ë°” */
.topbar{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 20px; background:var(--panel);
  border-bottom:2px solid var(--line);
}
.title{ font-weight:800; text-align:center; flex:1; }
.actions{ display:flex; gap:10px; }

/* ë²„íŠ¼ */
.link-btn, .k-btn{
  border:2px solid var(--line);
  border-radius:10px;
  background:var(--bg);
  color:var(--text);
  font-weight:700;
  cursor:pointer;
  transition: background .2s ease, transform .05s ease;
}
.link-btn:hover, .k-btn:hover{ background:var(--hover); }
.link-btn{ padding:8px 12px; font-size:13px; }
.k-btn{ padding:12px 28px; font-size:18px; }
.k-btn:active{ transform:translateY(1px); }

/* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
.main-wrap{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:24px;
}
h2{margin-top:0;}

/* ì¹´ë“œ ê·¸ë¦¬ë“œ */
.card-grid{
  display:flex; flex-wrap:wrap;
  justify-content:center;
  gap:30px;
  margin-top:20px;
}
.card{
  width:260px;
  background:var(--panel);
  border:2px solid var(--line);
  border-radius:12px;
  text-align:center;
  box-shadow:0 3px 8px rgba(0,0,0,.1);
  transition: transform .1s ease;
}
.card:hover{ transform:translateY(-3px); background:var(--hover); }
.thumb img{
  width:100%;
  height:160px;
  object-fit:cover;
  border-radius:10px 10px 0 0;
}
.info{ padding:10px 0; }
.info h3{ margin:8px 0 4px; font-size:18px; }
.info .muted{ color:var(--muted); font-size:14px; }

/* í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ */
.bottom-actions{
  margin-top:40px;
  display:flex; gap:20px; justify-content:center;
}
</style>
</head>

<body>
  <!-- ìƒë‹¨ë°” -->
  <div class="topbar">
    <div class="actions">
      <a href="/kiosk/step1" class="link-btn" id="btnHome">ğŸ  ãƒ›ãƒ¼ãƒ </a>
    </div>
    <div class="title" id="titleText">è»Šä¸¡ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</div>
    <div class="actions">
      <button type="button" class="link-btn" id="btnLang">English</button>
    </div>
  </div>

  <!-- ë©”ì¸ -->
  <main class="main-wrap">
    <h2 id="subTitle">ä»¥ä¸‹ã®è»Šä¸¡ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</h2>

    <!-- í›„ë³´ ì°¨ëŸ‰ ë¦¬ìŠ¤íŠ¸ -->
    <div class="card-grid">
      <!-- Thymeleaf ë°˜ë³µ -->
      <div class="card" th:each="car : ${candidates}">
        <div class="thumb">
          <img th:src="${car.imageUrl != null ? car.imageUrl : '/images/noimage.png'}" alt="è»Šä¸¡ç”»åƒ">
        </div>
        <div class="info">
          <h3 th:text="${car.plate}">å“å· 300 ã‚ 12-34</h3>
          <div class="muted" th:text="${#temporals.format(car.entryAt, 'yyyy-MM-dd HH:mm')}">2025-10-29 13:20</div>
        </div>
        <div style="padding:12px;">
          <!-- âœ… ìˆ˜ì •ëœ í¼ -->
          <form th:action="@{/kiosk/step3}" method="get">
            <input type="hidden" name="candidateId" th:value="${car.id}" />
            <input type="hidden" name="plate" th:value="${plate}" />
            <button type="submit" class="k-btn">ã“ã®è»Šã‚’é¸æŠ</button>
          </form>
        </div>
      </div>
    </div>

    <!-- í•˜ë‹¨ ë²„íŠ¼ -->
    <div class="bottom-actions">
      <button class="k-btn" onclick="goBack()">æˆ»ã‚‹</button>
    </div>
  </main>

<script>
(function(){
  let lang=localStorage.getItem('kiosk_lang')||'ja';
  const tText=document.getElementById('titleText');
  const sTitle=document.getElementById('subTitle');
  const bLang=document.getElementById('btnLang');
  const bHome=document.getElementById('btnHome');

  const i18n={
    ja:{title:"è»Šä¸¡ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚",sub:"ä»¥ä¸‹ã®è»Šä¸¡ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ",
        home:"ãƒ›ãƒ¼ãƒ ",langToggle:"English",select:"ã“ã®è»Šã‚’é¸æŠ",back:"æˆ»ã‚‹"},
    en:{title:"Select your vehicle.",sub:"The following vehicles were found:",
        home:"Home",langToggle:"æ—¥æœ¬èª",select:"Select this car",back:"Back"}
  };

  function applyLang(){
    const t=i18n[lang];
    tText.textContent=t.title;
    sTitle.textContent=t.sub;
    bHome.textContent=t.home;
    bLang.textContent=t.langToggle;

    // ì¹´ë“œ ë‚´ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
    document.querySelectorAll('.k-btn').forEach(btn=>{
      if(btn.textContent.includes("é¸æŠ")||btn.textContent.includes("Select")) btn.textContent=t.select;
      if(btn.textContent.includes("æˆ»")||btn.textContent.includes("Back")) btn.textContent=t.back;
    });
  }
  bLang.onclick=()=>{ lang=(lang==='ja'?'en':'ja'); localStorage.setItem('kiosk_lang',lang); applyLang(); };
  applyLang();
})();

function goBack(){ window.location.href='/kiosk/step1'; }
</script>
</body>
</html>
