<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>äº‹å‰ç²¾ç®—ï½œå®Œäº†</title>

<style>
:root {
	--bg: #fdf5e6;
	--panel: #fffaf0;
	--text: #444;
	--line: #d8c49b;
	--accent: #d6b85a;
	--hover: #f8efd0;
	--muted: #666;
}

* {
	box-sizing: border-box;
}

html, body {
	height: 100%;
	margin: 0;
	padding: 0;
}

body {
	background: var(--bg);
	color: var(--text);
	font-family: 'Noto Sans JP', 'Malgun Gothic', sans-serif;
	display: flex;
	flex-direction: column;
}

/* ìƒë‹¨ë°” */
.topbar {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 12px 20px;
	background: var(--panel);
	border-bottom: 2px solid var(--line);
}

.title {
	font-weight: 800;
	text-align: center;
	flex: 1;
}

.actions {
	display: flex;
	gap: 10px;
}

.link-btn, .k-btn {
	border: 2px solid var(--line);
	border-radius: 10px;
	background: var(--bg);
	color: var(--text);
	font-weight: 700;
	cursor: pointer;
	transition: background .2s ease, transform .05s ease;
	text-decoration: none;
}

.link-btn:hover, .k-btn:hover {
	background: var(--hover);
}

.link-btn {
	padding: 8px 12px;
	font-size: 13px;
}

.k-btn {
	padding: 12px 28px;
	font-size: 18px;
}

.k-btn:active {
	transform: translateY(1px);
}

.k-btn--accent {
	background: var(--accent);
	color: #fff;
}

.k-btn--accent:hover {
	background: #caaa45;
}

/* ë ˆì´ì•„ì›ƒ */
.main-wrap {
	flex: 1;
	display: grid;
	gap: 16px;
	padding: 16px;
	grid-template-columns: 1fr 1fr;
}

@media ( max-width :980px) {
	.main-wrap {
		grid-template-columns: 1fr;
	}
}

.card {
	background: var(--panel);
	border: 2px solid var(--line);
	border-radius: 12px;
	padding: 20px;
	box-shadow: 0 3px 8px rgba(0, 0, 0, .1);
}

/* ì™¼ìª½ - ì™„ë£Œ ë©”ì‹œì§€ */
.left-box {
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
	text-align: center;
	gap: 20px;
}

.left-box h2 {
	margin: 0;
	font-size: 28px;
	color: #2e7d32;
}

.left-box p {
	font-size: 18px;
	color: var(--muted);
}

/* ì˜¤ë¥¸ìª½ - ì˜ìˆ˜ì¦ */
.right-box {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 20px;
}

.receipt {
	width: 300px;
	background: #fff;
	border: 2px solid var(--line);
	border-radius: 8px;
	padding: 16px;
	text-align: left;
	display: none;
}

.receipt h3 {
	text-align: center;
	margin: 0 0 10px 0;
}

.receipt hr {
	border: none;
	border-top: 1px dashed var(--line);
}

.receipt p {
	margin: 4px 0;
	font-size: 14px;
}
</style>
</head>

<body>
	<!-- ìƒë‹¨ë°” -->
	<div class="topbar">
		<div class="actions">
			<a href="/kiosk/step1" class="link-btn" id="btnHome">ğŸ  ãƒ›ãƒ¼ãƒ </a>
		</div>
		<div class="title" id="titleText">ç²¾ç®—å®Œäº†</div>
		<div class="actions">
			<button type="button" class="link-btn" id="btnLang">English</button>
		</div>
	</div>

	<!-- ë©”ì¸ -->
	<main class="main-wrap">
		<!-- ì™¼ìª½ -->
		<section class="card left-box">
			<h2 id="msgTitle">ç²¾ç®—ãŒå®Œäº†ã—ã¾ã—ãŸã€‚</h2>
			<p id="msgText">ã”åˆ©ç”¨ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ãƒãƒ¼ãŒé–‹ãã¾ã—ãŸã‚‰å®‰å…¨ã«ã”å‡ºåº«ãã ã•ã„ã€‚</p>
			<p style="font-size: 14px;">(Please exit safely when the gate
				opens.)</p>
		</section>

		<!-- ì˜¤ë¥¸ìª½ -->
		<section class="card right-box">
			<h2 id="receiptTitle">é ˜åæ›¸ã®ç™ºè¡Œ</h2>
			<button class="k-btn k-btn--accent" id="btnReceipt">é ˜åæ›¸ã‚’è¡¨ç¤º</button>

			<div class="receipt" id="receiptBox">
				<h3>é ˜åæ›¸ (RECEIPT)</h3>
				<hr />
				<p>
					æ—¥ä»˜: <span id="rDate"></span>
				</p>

				<!-- ì°¨ëŸ‰ë²ˆí˜¸ -->
				<p>
					ãƒŠãƒ³ãƒãƒ¼: <span id="rPlate" th:text="${plate}">â€”</span>
				</p>

				<p>
					å…¥åº«æ™‚åˆ»: <span id="rEntry" th:text="${entryTime}">â€”</span>
				</p>
				<p>
					å‡ºåº«æ™‚åˆ»: <span id="rExit" th:text="${exitTime}">â€”</span>
				</p>
				<p>
					åˆ©ç”¨æ™‚é–“: <span id="rDuration" th:text="${useTime}">â€”</span>
				</p>
				<hr />

				<!-- ìš”ê¸ˆ: totalFee ì‚¬ìš© -->
				<p>
					é§è»Šæ–™é‡‘: <b><span id="rFee"
						th:text="${#numbers.formatInteger(totalFee,0)}">0</span></b> å††
				</p>

				<!-- ì§€ë¶ˆë°©ë²• -->
				<p>
					ãŠæ”¯æ‰•ã„æ–¹æ³•: <span id="rMethod"
						th:text="${paymentMethod} == 'cash' ? 'ç¾é‡‘' :
                         (${paymentMethod} == 'card' ? 'ã‚«ãƒ¼ãƒ‰' : 'é ˜åæ›¸')">â€”</span>
				</p>
				<hr />
				<p style="text-align: center;">ã”åˆ©ç”¨ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ</p>
			</div>
		</section>
	</main>

	<script>
  (function(){
    let lang = localStorage.getItem('kiosk_lang') || 'ja';
    const i18n = {
      ja:{ title:"ç²¾ç®—å®Œäº†", home:"ãƒ›ãƒ¼ãƒ ", lang:"English",
           msgTitle:"ç²¾ç®—ãŒå®Œäº†ã—ã¾ã—ãŸã€‚", msgText:"ã”åˆ©ç”¨ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ãƒãƒ¼ãŒé–‹ãã¾ã—ãŸã‚‰å®‰å…¨ã«ã”å‡ºåº«ãã ã•ã„ã€‚",
           receiptTitle:"é ˜åæ›¸ã®ç™ºè¡Œ", show:"é ˜åæ›¸ã‚’è¡¨ç¤º", hide:"é ˜åæ›¸ã‚’é–‰ã˜ã‚‹",
           thanks:"ã”åˆ©ç”¨ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ" },
      en:{ title:"Payment Complete", home:"Home", lang:"æ—¥æœ¬èª",
           msgTitle:"Payment has been completed.", msgText:"Thank you for using our service. Please exit safely when the gate opens.",
           receiptTitle:"Receipt Issuance", show:"Show Receipt", hide:"Hide Receipt",
           thanks:"Thank you for your visit." }
    };

    const btnLang = document.getElementById('btnLang');
    const btnHome = document.getElementById('btnHome');
    const titleText = document.getElementById('titleText');
    const msgTitle = document.getElementById('msgTitle');
    const msgText  = document.getElementById('msgText');
    const receiptTitle = document.getElementById('receiptTitle');
    const btnReceipt = document.getElementById('btnReceipt');
    const receiptBox = document.getElementById('receiptBox');

    function applyLang(){
      const t = i18n[lang];
      titleText.textContent = t.title;
      btnHome.textContent = "ğŸ  " + t.home;
      btnLang.textContent = t.lang;
      msgTitle.textContent = t.msgTitle;
      msgText.textContent  = t.msgText;
      receiptTitle.textContent = t.receiptTitle;
      btnReceipt.textContent = t.show;
      // ë§ˆì§€ë§‰ ì¤„(ê°ì‚¬ ì¸ì‚¬) êµì²´
      const lastP = receiptBox.querySelector("p:last-child");
      if (lastP) lastP.textContent = t.thanks;
    }
    btnLang.onclick = () => { lang = (lang==='ja' ? 'en' : 'ja'); localStorage.setItem('kiosk_lang', lang); applyLang(); };
    applyLang();

    // ë‚ ì§œ í‘œì‹œ
    const now = new Date();
    document.getElementById('rDate').textContent =
      now.getFullYear() + "-" + String(now.getMonth()+1).padStart(2,'0') + "-" + String(now.getDate()).padStart(2,'0') +
      " " + String(now.getHours()).padStart(2,'0') + ":" + String(now.getMinutes()).padStart(2,'0');

    // ì˜ìˆ˜ì¦ í‘œì‹œ í† ê¸€
    btnReceipt.addEventListener('click', ()=>{
      const visible = receiptBox.style.display === 'block';
      receiptBox.style.display = visible ? 'none' : 'block';
      btnReceipt.textContent = visible ? i18n[lang].show : i18n[lang].hide;
    });
  })();
  </script>
</body>
</html>
